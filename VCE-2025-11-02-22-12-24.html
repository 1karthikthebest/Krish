<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KRISH - Welcome</title>
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    <!-- Configure Tailwind for Inter font --><script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Apply the Inter font and ensure no overflow during transitions */
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            /* Default landing page gradient */
            transition: background-color 1s ease-in-out; 
        }
        
        /* Transition for content fading/sliding */
        #landing-content, #login-form-container, #chat-app-container {
            transition: all 1s ease-in-out;
        }

        /* Message bubbles styling for mock chat */
        .message-bubble {
            max-width: 80%;
            padding: 8px 12px;
            border-radius: 1rem;
            margin-bottom: 12px;
            word-wrap: break-word;
        }

        .user-message {
            background-color: #2e7d32; /* Darker green */
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 0;
        }

        .ai-message {
            background-color: #374151; /* Gray/Black */
            color: white;
            align-self: flex-start;
            border-bottom-left-radius: 0;
        }

        /* Styling for sidebar navigation items */
        .sidebar-item {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s, box-shadow 0.2s; /* Add box-shadow for glow */
            color: #4ade80; /* text-green-400 for icons */
            font-size: 1.25rem; /* text-xl */
        }
        .sidebar-item:hover {
            background-color: #1e293b; /* gray-800 */
            transform: scale(1.1); /* Animate on hover */
            box-shadow: 0 0 15px rgba(74, 222, 128, 0.6); /* Green glow on hover */
        }
        .sidebar-item.active {
            background-color: #22c55e; /* green-500 */
            color: #1f2937; /* gray-800 */
            transform: scale(1.05);
            box-shadow: 0 0 12px rgba(74, 222, 128, 0.8); /* Persistent green glow for active */
        }
        /* Smaller top bar padding */
        .chat-header {
            padding-top: 10px;
            padding-bottom: 10px;
        }
        /* Style for the user avatars in the team list */
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #2e7d32; /* Match user bubble color */
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
            color: white;
        }
    </style>
</head>
<!-- Initial Background is blue-black gradient --><body class="min-h-screen flex flex-col text-white bg-gradient-to-br from-gray-900 to-blue-900">

    <!-- 2. Header / Navigation (Visible on Landing/Login) --><header id="app-header" class="relative z-30 p-4 md:p-6 w-full">
        <nav class="flex justify-between items-center max-w-7xl mx-auto">
            
            <!-- Logo (Top Left) --><a href="#" id="krish-logo" class="text-3xl font-extrabold tracking-widest text-indigo-400 hover:text-indigo-300 transition duration-300 transform">
                KRISH
            </a>

            <!-- Navigation Links (Center to Right) --><div id="nav-links" class="flex items-center space-x-4 sm:space-x-8 transition-opacity duration-500">
                
                <!-- Inactive Links --><a href="#" class="text-lg font-medium text-gray-300 hover:text-white transition duration-200 opacity-70 cursor-not-allowed hidden sm:block">
                    About Us
                </a>
                <a href="#" class="text-lg font-medium text-gray-300 hover:text-white transition duration-200 opacity-70 cursor-not-allowed hidden sm:block">
                    Features
                </a>

                <!-- Active Login Button (Top Right) --><button id="login-button" class="px-5 py-2 bg-indigo-600 text-white text-lg font-semibold rounded-lg shadow-xl hover:bg-indigo-700 transition duration-300 transform hover:scale-105 active:scale-95">
                    Login
                </button>
            </div>
        </nav>
    </header>

    <!-- 3. Main Content Containers --><div class="flex-grow flex items-center justify-center relative">
        
        <!-- Landing Page Content: Motivational Quote (Visible by default) --><main id="landing-content" class="relative z-10 flex flex-grow items-center justify-center p-6 w-full opacity-100">
            <div class="text-center max-w-4xl">
                <h1 class="text-4xl sm:text-6xl md:text-7xl font-extrabold leading-tight tracking-tight">
                    "The world is ruled by power, and power is obtained by money."
                </h1>
            </div>
        </main>

        <!-- Login Form: Hidden by default --><section id="login-form-container" class="absolute inset-0 z-20 flex items-center justify-center p-4 opacity-0 pointer-events-none translate-y-full">
            <div class="w-full max-w-md bg-gray-800/80 backdrop-blur-md p-8 rounded-xl shadow-2xl border border-indigo-700/50">
                <h2 class="text-3xl font-bold text-center text-indigo-400 mb-6">Welcome Back</h2>
                <form id="login-form">
                    <div class="mb-4">
                        <label for="email" class="block text-sm font-medium text-gray-300 mb-1">Email Address</label>
                        <input type="text" id="email" name="email" required 
                               class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-white placeholder-gray-400">
                    </div>
                    <div class="mb-4">
                        <label for="password" class="block text-sm font-medium text-gray-300 mb-1">Password</label>
                        <input type="password" id="password" name="password" required 
                               class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-white placeholder-gray-400">
                    </div>
                    
                    <!-- Validation Message Display Area --><div id="login-message" class="text-center h-5 mb-4 font-semibold transition-opacity duration-300 opacity-0"></div>

                    <button type="submit" class="w-full py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-[1.01]">
                        Sign In
                    </button>
                </form>
                <p class="mt-6 text-center text-sm text-gray-400">
                    <!-- "Go Back" button inside the form --><button id="go-back-button" class="text-indigo-400 hover:text-indigo-300 font-medium underline">Go Back to Landing Page</button>
                </p>
            </div>
        </section>

        <!-- 4. Chat Application Interface (Hidden by default) --><!-- This now acts as the main authenticated APP container --><section id="chat-app-container" class="hidden absolute inset-0 w-full h-full flex opacity-0 transition-opacity duration-1000">
            
            <!-- Left Sidebar Navigation --><div id="sidebar-nav" class="w-20 bg-gray-900 flex-shrink-0 flex flex-col items-center py-4 space-y-4 shadow-2xl border-r border-green-700/30">
                
                <!-- Chat View Button (data-view used for JS switching) -->
                <div class="sidebar-item" data-view="chat-view" data-channel-name="Command Channel">
                    <span title="Chat">üó®Ô∏è</span>
                </div>
                <!-- Activity View Button -->
                <div class="sidebar-item" data-view="activity-view">
                    <span title="Activity">üîî</span>
                </div>
                <!-- Team View Button -->
                <div class="sidebar-item" data-view="team-view">
                    <span title="Team">üë•</span>
                </div>
                <!-- Settings View Button -->
                <div class="sidebar-item" data-view="settings-view">
                    <span title="Settings">‚öôÔ∏è</span>
                </div>
                
                <!-- Separator --><div class="h-px w-1/2 bg-gray-700"></div>

                <!-- Channels/Teams Placeholder (smaller to distinguish from main icons) -->
                <div class="sidebar-item text-sm text-green-400 opacity-70 hover:opacity-100 hover:scale-110 hover:shadow-none" data-view="chat-view" data-channel-name="K-Channel">
                    K
                </div>
                <div class="sidebar-item text-sm text-indigo-400 opacity-70 hover:opacity-100 hover:scale-110 hover:shadow-none" data-view="chat-view" data-channel-name="R-Channel">
                    R
                </div>
            </div>

            <!-- Right Side: Content Area (Dynamically changes based on sidebar click) --><div class="flex-grow flex flex-col min-w-0">
                
                <!-- CHAT VIEW (Initial App View) -->
                <div id="chat-view" class="flex-grow flex flex-col">
                    <!-- Chat Header (Smaller padding) --><div class="chat-header p-3 flex justify-between items-center bg-gray-800 shadow-lg z-30">
                        <div class="text-xl font-bold text-green-400">
                            <span class="text-indigo-400" id="app-name-prefix">KRISH</span> <span id="current-channel-name">Command Channel</span>
                        </div>
                        
                        <!-- Added Logout Button -->
                        <div class="flex items-center space-x-4">
                            <div class="text-sm text-gray-400 hidden sm:block">
                                Welcome, 1karthikthebest!
                            </div>
                            <button id="logout-button" class="px-3 py-1 bg-red-600 text-white text-sm font-semibold rounded-lg shadow-md hover:bg-red-700 transition duration-300 transform hover:scale-105 active:scale-95">
                                Log Out
                            </button>
                        </div>
                    </div>

                    <!-- Message Area --><div id="messages-container" class="flex-grow overflow-y-auto p-4 md:p-8 flex flex-col space-y-3 bg-gray-900/50">
                        <!-- Messages will be injected here by JavaScript loadChannel function -->
                    </div>

                    <!-- Message Input Area --><div class="p-4 bg-gray-800/90 border-t border-green-700/50 shadow-inner z-30">
                        <form id="message-form" class="flex space-x-3">
                            <input type="text" id="message-input" placeholder="Type your command..." required
                                class="flex-grow px-4 py-3 bg-gray-700 border border-green-600 rounded-full focus:ring-green-500 focus:border-green-500 text-white placeholder-gray-400">
                            <button type="submit" class="px-6 py-3 bg-green-600 text-white font-semibold rounded-full hover:bg-green-700 transition duration-300 transform hover:scale-105 active:scale-95">
                                Send
                            </button>
                        </form>
                    </div>
                </div>

                <!-- TEAM VIEW (Initially Hidden) -->
                <div id="team-view" class="hidden flex-grow flex-col bg-gray-900/50">
                    
                    <!-- Team Header (Mimics image style) --><div class="p-3 flex justify-between items-center bg-gray-800 shadow-lg z-30 chat-header">
                        <h1 class="text-2xl font-extrabold text-white">Party List</h1>
                        <div class="flex space-x-4 text-green-400 text-xl">
                            <span title="Notifications">üîî</span>
                            <span title="Search">üîç</span>
                            <span title="Add Member">+</span>
                        </div>
                    </div>

                    <!-- Team List Content --><div class="flex-grow overflow-y-auto">
                        
                        <div class="p-4 space-y-2">
                            <!-- Team Member Card --><div class="flex items-center justify-between p-3 bg-gray-900 rounded-xl hover:bg-gray-800 transition duration-200 cursor-pointer">
                                <div class="flex items-center space-x-4">
                                    <div class="user-avatar bg-indigo-600">AB</div>
                                    <div>
                                        <div class="text-lg font-semibold">USER 1 </div>
                                        <div class="text-xs text-gray-400">Last seen: 2 hours ago</div>
                                    </div>
                                </div>
                                <div class="text-sm text-gray-400 font-medium">
                                    Nov 1, 2025
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-3 bg-gray-900 rounded-xl hover:bg-gray-800 transition duration-200 cursor-pointer">
                                <div class="flex items-center space-x-4">
                                    <div class="user-avatar bg-green-600">P</div>
                                    <div>
                                        <div class="text-lg font-semibold">peps1234egf</div>
                                        <div class="text-xs text-gray-400">Active now</div>
                                    </div>
                                </div>
                                <div class="text-sm text-gray-400 font-medium">
                                    Nov 1, 2025
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-900 rounded-xl hover:bg-gray-800 transition duration-200 cursor-pointer">
                                <div class="flex items-center space-x-4">
                                    <div class="user-avatar bg-red-600">K</div>
                                    <div>
                                        <div class="text-lg font-semibold">USER 2 </div>
                                        <div class="text-xs text-green-400">Online</div>
                                    </div>
                                </div>
                                <div class="text-sm text-gray-400 font-medium">
                                    Oct 30, 2025
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-3 bg-gray-900 rounded-xl hover:bg-gray-800 transition duration-200 cursor-pointer">
                                <div class="flex items-center space-x-4">
                                    <div class="user-avatar bg-yellow-600">L</div>
                                    <div>
                                        <div class="text-lg font-semibold">USER 3 </div>
                                        <div class="text-xs text-gray-400">Offline</div>
                                    </div>
                                </div>
                                <div class="text-sm text-gray-400 font-medium">
                                    Oct 30, 2025
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-900 rounded-xl hover:bg-gray-800 transition duration-200 cursor-pointer">
                                <div class="flex items-center space-x-4">
                                    <div class="user-avatar bg-gray-500">G</div>
                                    <div>
                                        <div class="text-lg font-semibold">GODx_Mayu</div>
                                        <div class="text-xs text-gray-400">Party started</div>
                                    </div>
                                </div>
                                <div class="text-sm text-gray-400 font-medium">
                                    Oct 27, 2025
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ACTIVITY VIEW (Placeholder) -->
                <div id="activity-view" class="hidden flex-grow flex-col bg-gray-900/50">
                    <div class="p-3 flex justify-center items-center bg-gray-800 shadow-lg z-30 chat-header">
                        <h1 class="text-2xl font-extrabold text-white" id="activity-header">Activity Log</h1>
                    </div>
                    <div id="activity-content" class="flex-grow flex items-center justify-center text-center p-8">
                        <!-- Content will be injected by JS -->
                    </div>
                </div>

                <!-- SETTINGS VIEW (Placeholder) -->
                <div id="settings-view" class="hidden flex-grow flex-col bg-gray-900/50">
                    <div class="p-3 flex justify-center items-center bg-gray-800 shadow-lg z-30 chat-header">
                        <h1 class="text-2xl font-extrabold text-white" id="settings-header">Settings</h1>
                    </div>
                    <div id="settings-content" class="flex-grow flex items-center justify-center text-center p-8">
                        <!-- Content will be injected by JS -->
                    </div>
                </div>
                
            </div>
        </section>

    </div>

    <script>
        const loginBtn = document.getElementById('login-button');
        const appHeader = document.getElementById('app-header');
        const navLinks = document.getElementById('nav-links');
        const landingContent = document.getElementById('landing-content');
        const loginFormContainer = document.getElementById('login-form-container');
        const goBackBtn = document.getElementById('go-back-button');

        // Login Logic Elements
        const loginForm = document.getElementById('login-form');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const loginMessage = document.getElementById('login-message');

        // Chat App Elements
        const chatAppContainer = document.getElementById('chat-app-container');
        const messagesContainer = document.getElementById('messages-container');
        const messageForm = document.getElementById('message-form');
        const messageInput = document.getElementById('message-input');
        const currentChannelNameEl = document.getElementById('current-channel-name');
        
        // New Logout Button Element
        const logoutButton = document.getElementById('logout-button');

        // New View Elements and Sidebar Items
        const chatView = document.getElementById('chat-view');
        const teamView = document.getElementById('team-view');
        const activityView = document.getElementById('activity-view'); // New element
        const settingsView = document.getElementById('settings-view'); // New element
        
        // Select all sidebar items that are for navigation (not just dividers)
        const sidebarItems = document.querySelectorAll('#sidebar-nav .sidebar-item'); 

        const CORRECT_USERNAME = '1karthikthebest';
        const CORRECT_PASSWORD = '9620373944';
        
        // Mock messages for the main channel
        const initialMockMessages = `
            <div class="ai-message message-bubble self-start">
                Hello 1karthikthebest! Access Granted. You are now in the command center.
            </div>
            <div class="user-message message-bubble self-end">
                That's what I like to hear. What's the status on the main objective?
            </div>
            <div class="ai-message message-bubble self-start">
                The objective is clear: <b>Acquire Resources</b>. All systems are green and ready for your command.
            </div>
        `;

        /**
         * Loads content specific to the selected channel.
         * @param {string} channelName - The name of the channel to load.
         */
        const loadChannel = (channelName) => {
            currentChannelNameEl.textContent = channelName;
            messagesContainer.innerHTML = ''; // Clear previous messages

            if (channelName === 'Command Channel') {
                messagesContainer.innerHTML = initialMockMessages;
            } else if (channelName === 'K-Channel') {
                messagesContainer.innerHTML = `
                    <div class="ai-message message-bubble self-start">
                        Welcome to ${channelName}. What is your first <b>K-Command</b>?
                    </div>
                `;
            } else if (channelName === 'R-Channel') {
                messagesContainer.innerHTML = `
                    <div class="ai-message message-bubble self-start">
                        You've entered ${channelName}. Ready for <b>R-assignments</b>.
                    </div>
                `;
            } else {
                // Default for new/unknown channel
                messagesContainer.innerHTML = `
                    <div class="ai-message message-bubble self-start">
                        Welcome to the ${channelName} view.
                    </div>
                `;
            }

            // Scroll to bottom after loading new content
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        };

        /**
         * Populates a placeholder view with a "Coming Soon" message.
         * @param {HTMLElement} viewElement - The DOM element of the view container (e.g., activityView).
         * @param {string} featureName - The title of the feature (e.g., 'Activity Log').
         */
        const showPlaceholderMessage = (viewElement, featureName) => {
            const contentArea = viewElement.querySelector(`#${viewElement.id}-content`);
            const header = viewElement.querySelector(`#${viewElement.id}-header`);

            if (header) {
                header.textContent = featureName;
            }

            if (contentArea) {
                contentArea.innerHTML = `
                    <div class="p-8 rounded-xl bg-gray-800 border border-indigo-500 shadow-2xl animate-pulse">
                        <h2 class="text-3xl font-bold text-indigo-400 mb-2">${featureName}</h2>
                        <p class="text-xl text-gray-300">This feature is coming soon!</p>
                        <p class="text-sm text-gray-500 mt-4">Patience is a virtue, agent.</p>
                    </div>
                `;
            }
        };

        /**
         * Switches the main content view based on sidebar clicks.
         * @param {string} viewId - The ID of the view element to show (e.g., 'chat-view', 'team-view').
         * @param {HTMLElement} clickedItem - The sidebar item element that was clicked.
         */
        const switchAppView = (viewId, clickedItem) => {
            // List all content view elements
            const allViews = [chatView, teamView, activityView, settingsView];
            
            // Hide all content views
            allViews.forEach(view => {
                view.classList.add('hidden');
                view.classList.remove('flex', 'flex-col');
            });

            // Remove active class from all sidebar items
            sidebarItems.forEach(item => item.classList.remove('active'));

            // Find and show the requested view
            const targetView = document.getElementById(viewId);
            if (targetView) {
                targetView.classList.remove('hidden');
                targetView.classList.add('flex', 'flex-col');
            }

            // Set the active class on the clicked sidebar item
            if (clickedItem) {
                clickedItem.classList.add('active');
                
                // Handle placeholder views immediately after switching
                if (viewId === 'activity-view') {
                    showPlaceholderMessage(activityView, 'Activity Log');
                } else if (viewId === 'settings-view') {
                    showPlaceholderMessage(settingsView, 'Settings');
                }
            }
        };


        // Logic to transition from Landing Page to Login Form
        const showLoginForm = () => {
            // 1. Fade out Quote Content
            landingContent.classList.remove('opacity-100');
            landingContent.classList.add('opacity-0', 'pointer-events-none');
            
            // 2. Hide navigation links 
            navLinks.classList.add('opacity-0', 'pointer-events-none');
            
            // 3. Delay the form slide-in
            setTimeout(() => {
                // Hide landing content completely 
                landingContent.classList.add('hidden');
                
                // Show and transition the login form
                loginFormContainer.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-full');
                loginFormContainer.classList.add('opacity-100', 'translate-y-0');

                // Restore Login button visibility/pointer-events after content hides
                loginBtn.classList.remove('opacity-0', 'pointer-events-none');

                // Clear any previous message when showing the form again
                loginMessage.classList.remove('opacity-100', 'text-green-400', 'text-red-400');
                loginMessage.textContent = '';
                
            }, 100); 
        };

        // Logic to transition from Login Form back to Landing Page
        const showLandingPage = () => {
            // 1. Start transition back (Hide form)
            loginFormContainer.classList.remove('opacity-100', 'translate-y-0');
            loginFormContainer.classList.add('opacity-0', 'translate-y-full');

            // 2. Hide the header login button temporarily while the transition occurs
            loginBtn.classList.add('opacity-0', 'pointer-events-none');

            // 3. Delay to allow form slide to finish (1s transition time)
            setTimeout(() => {
                // Show Landing Content (Quote)
                landingContent.classList.remove('hidden', 'opacity-0', 'pointer-events-none');
                landingContent.classList.add('opacity-100');

                // Restore Header Links and Button
                navLinks.classList.remove('opacity-0', 'pointer-events-none');
                loginBtn.classList.remove('opacity-0', 'pointer-events-none');
                
                // Clear fields on navigation back
                emailInput.value = '';
                passwordInput.value = '';
                
            }, 1000); 
        };

        // Logic to transition from Successful Login to Chat App
        const showChatApp = () => {
            // Wait for 1 second after success message appears
            setTimeout(() => {
                // 1. Hide all previous content containers
                appHeader.classList.add('hidden');
                landingContent.classList.add('hidden');
                loginFormContainer.classList.add('hidden');

                // 2. Change the body background to the new black/green gradient
                document.body.classList.remove('to-blue-900'); // Remove the blue end color
                document.body.classList.add('to-green-900');  // Add the green end color

                // 3. Show the main app container
                chatAppContainer.classList.remove('hidden', 'opacity-0');
                chatAppContainer.classList.add('opacity-100');

                // 4. Ensure the default view (Chat) is displayed correctly on load
                const defaultChatIcon = document.querySelector('[data-channel-name="Command Channel"]');
                switchAppView('chat-view', defaultChatIcon);
                loadChannel('Command Channel');

            }, 1000); 
        };

        // Logic to transition from Chat App back to Landing Page (Logout)
        const logOut = () => {
            // 1. Hide the main app container
            chatAppContainer.classList.remove('opacity-100');
            chatAppContainer.classList.add('opacity-0');

            // 2. Change the body background back to the initial blue gradient
            document.body.classList.remove('to-green-900');
            document.body.classList.add('to-blue-900');

            // 3. Delay to allow fade out to finish (1s transition time)
            setTimeout(() => {
                chatAppContainer.classList.add('hidden'); // Hide completely

                // 4. Restore the landing page/header elements
                appHeader.classList.remove('hidden');
                landingContent.classList.remove('hidden', 'opacity-0', 'pointer-events-none');
                landingContent.classList.add('opacity-100');
            }, 1000); 
        };

        // Function to handle login submission validation
        const handleLogin = (e) => {
            e.preventDefault();

            const enteredUsername = emailInput.value.trim();
            const enteredPassword = passwordInput.value.trim();

            // Reset message state
            loginMessage.classList.remove('opacity-100', 'text-green-400', 'text-red-400');
            loginMessage.textContent = ''; 

            // Delay showing the message slightly to ensure reset is seen
            setTimeout(() => {
                if (enteredUsername === CORRECT_USERNAME && enteredPassword === CORRECT_PASSWORD) {
                    // Success
                    loginMessage.textContent = 'LOGIN SUCCESSFUL';
                    loginMessage.classList.add('text-green-400');
                    // Clear fields 
                    emailInput.value = '';
                    passwordInput.value = '';

                    // Transition to the chat application
                    showChatApp();

                } else {
                    // Failure
                    loginMessage.textContent = 'INCORRECT USERNAME OR PASSWORD';
                    loginMessage.classList.add('text-red-400');
                }
                // Show the message
                loginMessage.classList.add('opacity-100');
            }, 10);
        };
        
        // Function to handle sending a new message
        const handleMessageSend = (e) => {
            e.preventDefault();
            const messageText = messageInput.value.trim();

            if (messageText) {
                // Create new message element (simulating user's message)
                const newMessage = document.createElement('div');
                newMessage.classList.add('user-message', 'message-bubble', 'self-end');
                newMessage.textContent = messageText;

                // Append and scroll to the bottom
                messagesContainer.appendChild(newMessage);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;

                // Clear input
                messageInput.value = '';
            }
        };

        // Attach main page event listeners
        loginBtn.addEventListener('click', showLoginForm);
        goBackBtn.addEventListener('click', showLandingPage);
        loginForm.addEventListener('submit', handleLogin);
        messageForm.addEventListener('submit', handleMessageSend);
        // New listener for logout button
        logoutButton.addEventListener('click', logOut);

        // Attach sidebar navigation listeners
        sidebarItems.forEach(item => {
            item.addEventListener('click', (e) => {
                const viewId = e.currentTarget.getAttribute('data-view');
                const channelName = e.currentTarget.getAttribute('data-channel-name');

                // Only handle items that have a defined view
                if (viewId) {
                    switchAppView(viewId, e.currentTarget);
                    
                    // If the target view is the chat view, load the specific channel content
                    if (viewId === 'chat-view' && channelName) {
                        loadChannel(channelName);
                    }
                }
            });
        });

    </script>

</body>
</html>

